"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ResultAggregator = void 0;
class ResultAggregator {
    constructor(task) {
        this.parts = [];
        this.isComplete = false;
        this.task = task;
    }
    addPart(part) {
        if (this.isComplete) {
            throw new Error('Cannot add parts to completed aggregation');
        }
        this.parts.push(part);
    }
    complete() {
        this.isComplete = true;
    }
    getResult() {
        if (!this.isComplete) {
            throw new Error('Aggregation not yet complete');
        }
        return [...this.parts];
    }
    getTask() {
        return Object.assign({}, this.task);
    }
    getProgress() {
        if (this.isComplete)
            return 1;
        return this.task.expectedParts
            ? this.parts.length / this.task.expectedParts
            : 0;
    }
}
exports.ResultAggregator = ResultAggregator;
//# sourceMappingURL=result-aggregator.js.map